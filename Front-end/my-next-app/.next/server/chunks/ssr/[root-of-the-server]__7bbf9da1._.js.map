{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/danil/OneDrive/Documentos/2025/P6/web/Projeto/Front-end/my-next-app/src/pages/loginPage.tsx"],"sourcesContent":["// pages/authPage.tsx\r\nimport { useState } from \"react\";\r\nimport Head from \"next/head\";\r\nimport { useRouter } from \"next/router\";\r\nimport Link from \"next/link\";\r\nimport axios from \"axios\";\r\nimport \"../../public/css/login.css\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faEye, faEyeSlash } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst AuthPage: React.FC = () => {\r\n  const router = useRouter();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [userType, setUserType] = useState(\"funcionario\");\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [passwordVisible, setPasswordVisible] = useState(false);\r\n\r\n  const pushInitialPage = () => {\r\n    router.push(\"/initialPage\");\r\n  };\r\n\r\n  const handleUserTypeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setUserType(e.target.value);\r\n  };\r\n\r\n  const togglePasswordVisibility = () => {\r\n    setPasswordVisible(prev => !prev);\r\n  };\r\n\r\n  const handleLogin = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setLoading(true);\r\n\r\n    try {\r\n      if (!email || !password) {\r\n        setError(\"Email e senha são obrigatórios.\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const targetRoute =\r\n        userType === \"administrador\" ? \"login/loja\" : \"login/funcionario\";\r\n\r\n      const payload = {\r\n        email: email.toLowerCase(),\r\n        senha: password,\r\n      };\r\n\r\n      const response = await axios.post(\r\n        `http://localhost:9700/api/${targetRoute}`,\r\n        payload,\r\n        {\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n        }\r\n      );\r\n\r\n      const data = response.data;\r\n\r\n      if (response.status === 200 && data.success && data.data?.token) {\r\n        localStorage.setItem(\"jwtToken\", data.data.token);\r\n        if (data.data.loja) {\r\n          localStorage.setItem(\"userData\", JSON.stringify(data.data.loja));\r\n        } else if (data.data.usuario) {\r\n          localStorage.setItem(\"userData\", JSON.stringify(data.data.usuario));\r\n        }\r\n\r\n        axios.defaults.headers.common[\r\n          \"Authorization\"\r\n        ] = `Bearer ${data.data.token}`;\r\n        router.push(\"/menuPage\");\r\n      } else {\r\n        setError(data.message || \"Usuário ou senha incorretos.\");\r\n      }\r\n    } catch (err: any) {\r\n      // Captura qualquer erro e seta o erro para o usuário\r\n      if (axios.isAxiosError(err)) {\r\n        setError(\r\n          err.response?.data?.message || `Erro na requisição: ${err.message}`\r\n        );\r\n      } else if (err instanceof Error) {\r\n        setError(`Erro inesperado: ${err.message}`);\r\n      } else {\r\n        setError(\"Erro desconhecido. Tente novamente.\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-between flex-column min-vh-100\">\r\n      <Head>\r\n        <title>Login</title>\r\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n      </Head>\r\n\r\n      <header className=\"w-100\">\r\n        <div className=\"header-panel\">\r\n          <img\r\n            className=\"img logo\"\r\n            src=\"/vl-store-logo-white.svg\"\r\n            alt=\"VL Store Logo\"\r\n            onClick={pushInitialPage}\r\n            style={{ cursor: \"pointer\" }}\r\n          />\r\n        </div>\r\n      </header>\r\n      {error && <div className=\"alert alert-danger\">{error}</div>}\r\n      <main className=\"flex-grow-1 d-flex align-items-center\">\r\n        <div className=\"mx-auto login-register-block fine-transparent-border white-light d-flex justify-content-center align-items-center overflow-hidden w-75\">\r\n          <div className=\"row w-100 shadow overflow-hidden\">\r\n            <div className=\"col-md-6 text-white d-flex flex-column justify-content-center align-items-center text-center p-4 quartenary\">\r\n              <h4 className=\"m-3\">Bem-vindo!</h4>\r\n              <p className=\"w-75\">\r\n                Insira os seus dados de login para ter acesso ao sistema.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"col-md-6 p-4 terciary\">\r\n              <h3 className=\"text-center mb-4\">Login</h3>\r\n\r\n              <form onSubmit={handleLogin}>\r\n                <div className=\"input-block row mb-2 align-items-center mb-3\">\r\n                  <div className=\"col-12 w-100\">\r\n                    <input\r\n                      type=\"email\"\r\n                      className=\"form-control input-form\"\r\n                      placeholder=\"Digite seu email\"\r\n                      value={email}\r\n                      onChange={(e) => setEmail(e.target.value)}\r\n                      disabled={loading}\r\n                      required\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"input-block row mb-2 align-items-center mb-3\">\r\n                  <div className=\"col-12 w-100 position-relative\">\r\n                    <input\r\n                      type={passwordVisible ? \"text\" : \"password\"}\r\n                      className=\"form-control input-form\"\r\n                      placeholder=\"Digite sua senha\"\r\n                      value={password}\r\n                      onChange={(e) => setPassword(e.target.value)}\r\n                      disabled={loading}\r\n                      required\r\n                    />\r\n                    <span\r\n                      className=\"position-absolute top-50 end-0 translate-middle-y me-4\"\r\n                      style={{ cursor: 'pointer', zIndex: 100 }}\r\n                      onClick={togglePasswordVisibility}\r\n                    >\r\n                      <FontAwesomeIcon icon={passwordVisible ? faEyeSlash : faEye} />\r\n                   </span>\r\n                  </div>\r\n                   \r\n                </div>\r\n\r\n                <div className=\"row justify-content-center mb-3\">\r\n                  <div className=\"col-auto\">\r\n                    <div className=\"form-check form-check-inline\">\r\n                      <input\r\n                        className=\"form-check-input\"\r\n                        type=\"radio\"\r\n                        name=\"userType\"\r\n                        id=\"adminRadio\"\r\n                        value=\"administrador\"\r\n                        checked={userType === \"administrador\"}\r\n                        onChange={handleUserTypeChange}\r\n                        disabled={loading}\r\n                      />\r\n                      <label className=\"form-check-label\" htmlFor=\"adminRadio\">\r\n                        Administrador\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"col-auto\">\r\n                    <div className=\"form-check form-check-inline\">\r\n                      <input\r\n                        className=\"form-check-input\"\r\n                        type=\"radio\"\r\n                        name=\"userType\"\r\n                        id=\"employeeRadio\"\r\n                        value=\"funcionario\"\r\n                        checked={userType === \"funcionario\"}\r\n                        onChange={handleUserTypeChange}\r\n                        disabled={loading}\r\n                      />\r\n                      <label\r\n                        className=\"form-check-label\"\r\n                        htmlFor=\"employeeRadio\"\r\n                      >\r\n                        Funcionário\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"row mt-3 gap-1\">\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"btn primaria col-11 col-lg-5 mx-auto d-flex justify-content-center align-items-center\"\r\n                    disabled={loading}\r\n                  >\r\n                    {loading ? \"Entrando...\" : \"Entrar\"}\r\n                  </button>\r\n                </div>\r\n\r\n                <p className=\"w-100 text-center mt-3\">\r\n                  Não possui conta? <Link href=\"/RegisterPage\">Cadastrar</Link>\r\n                </p>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n\r\n      <footer className=\"w-100\">\r\n        <div className=\"footer-panel\">{/* Footer content if needed */}</div>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuthPage;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}