{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/danil/OneDrive/Documentos/2025/P6/Projeto/Front-end/my-next-app/src/pages/AddEmployeePage.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport axios from \"axios\";\r\nimport \"../../public/css/products.css\";\r\nimport \"../../public/css/general.css\";\r\n\r\nconst AddEmployee = () => {\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const [employeeData, setEmployeeData] = useState({\r\n    nome: \"\",\r\n    email: \"\",\r\n    cpf: \"\",\r\n    telefone: \"\",\r\n    data_nascimento: \"\",\r\n    role: \"funcionario\", // Valor padrão\r\n  });\r\n\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const jwtToken = localStorage.getItem(\"jwtToken\");\r\n    const userData = localStorage.getItem(\"userData\");\r\n\r\n    if (!jwtToken || !userData) {\r\n      router.push(\"/initialPage\");\r\n      return;\r\n    }\r\n  }, []);\r\n\r\n  const pushBackToEmployees = () => {\r\n    router.push(\"/employeesPage\");\r\n  };\r\n\r\n  const handleChange = (\r\n    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>\r\n  ) => {\r\n    const { name, value } = e.target;\r\n    setEmployeeData((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(\"\");\r\n    setSuccess(false);\r\n\r\n    // Validações básicas\r\n    if (\r\n      !employeeData.nome ||\r\n      !employeeData.email ||\r\n      !employeeData.cpf ||\r\n      !employeeData.telefone ||\r\n      !employeeData.data_nascimento ||\r\n      !password\r\n    ) {\r\n      setError(\"Preencha todos os campos obrigatórios.\");\r\n      setLoading(false);\r\n      setTimeout(() => setError(\"\"), 3000);\r\n      return;\r\n    }\r\n\r\n    if (password !== confirmPassword) {\r\n      setError(\"As senhas não coincidem.\");\r\n      setLoading(false);\r\n      setTimeout(() => setError(\"\"), 3000);\r\n      return;\r\n    }\r\n\r\n    if (password.length < 8) {\r\n      setError(\"A senha deve ter pelo menos 8 caracteres.\");\r\n      setLoading(false);\r\n      setTimeout(() => setError(\"\"), 3000);\r\n      return;\r\n    }\r\n\r\n    const jwtToken = localStorage.getItem(\"jwtToken\");\r\n    const userData = localStorage.getItem(\"userData\");\r\n\r\n    if (!jwtToken || !userData) {\r\n      router.push(\"/initialPage\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const parsedData = JSON.parse(userData);\r\n      const idLoja = parsedData.id_loja;\r\n\r\n      const payload = {\r\n        ...employeeData,\r\n        senha: password,\r\n        id_loja: idLoja,\r\n      };\r\n\r\n      const response = await axios.post(\r\n        \"http://localhost:9700/api/funcionarios\",\r\n        payload,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${jwtToken}`,\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          timeout: 5000,\r\n        }\r\n      );\r\n\r\n      if (response.status === 201) {\r\n        setSuccess(true);\r\n        setTimeout(() => {\r\n          setSuccess(false);\r\n          pushBackToEmployees();\r\n        }, 3000);\r\n      }\r\n    } catch (error: any) {\r\n      const errorMessage =\r\n        error.response?.data?.message || \"Erro ao cadastrar funcionário\";\r\n      setError(errorMessage);\r\n      setTimeout(() => setError(\"\"), 3000);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const clearForm = () => {\r\n    setEmployeeData({\r\n      nome: \"\",\r\n      email: \"\",\r\n      cpf: \"\",\r\n      telefone: \"\",\r\n      data_nascimento: \"\",\r\n      role: \"FUNCIONARIO\",\r\n    });\r\n    setPassword(\"\");\r\n    setConfirmPassword(\"\");\r\n    setError(\"\");\r\n    setSuccess(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center align-items-center w-100\">\r\n      <div className=\"product-page d-flex justify-content-center align-items-center terciary p-4 flex-column rounded-5 white-light\">\r\n        <h3 className=\"col-12 text-center\">Adicionar Novo Funcionário</h3>\r\n\r\n        {success && (\r\n          <div className=\"alert alert-success col-12 text-center mt-2\">\r\n            Funcionário cadastrado com sucesso! Redirecionando...\r\n          </div>\r\n        )}\r\n\r\n        {error && (\r\n          <div className=\"alert alert-danger col-12 text-center mt-2\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <form\r\n          onSubmit={handleSubmit}\r\n          className=\"row w-100 justify-content-between\"\r\n        >\r\n          <div className=\"col-12 w-100\">\r\n            <div className=\"row product-info w-100 d-flex justify-content-between align-items-between\">\r\n              <div className=\"mx-auto col-12 p-4 info-base row\">\r\n                <h5 className=\"text-center mb-2\">Informações básicas</h5>\r\n\r\n                <label className=\"product-label\">Nome Completo*:</label>\r\n                <input\r\n                  className=\"mb-3 produto-input\"\r\n                  name=\"nome\"\r\n                  placeholder=\"Ex: João da Silva\"\r\n                  value={employeeData.nome}\r\n                  onChange={handleChange}\r\n                  required\r\n                />\r\n\r\n                <label className=\"product-label\">Email*:</label>\r\n                <input\r\n                  className=\"mb-3 produto-input\"\r\n                  type=\"email\"\r\n                  name=\"email\"\r\n                  placeholder=\"Ex: joao@email.com\"\r\n                  value={employeeData.email}\r\n                  onChange={handleChange}\r\n                  required\r\n                />\r\n\r\n                <label className=\"product-label\">CPF*:</label>\r\n                <input\r\n                  className=\"mb-3 produto-input\"\r\n                  name=\"cpf\"\r\n                  placeholder=\"Ex: 12345678900\"\r\n                  value={employeeData.cpf}\r\n                  onChange={handleChange}\r\n                  required\r\n                />\r\n\r\n                <label className=\"product-label\">Telefone*:</label>\r\n                <input\r\n                  className=\"mb-3 produto-input\"\r\n                  name=\"telefone\"\r\n                  placeholder=\"Ex: 11987654321\"\r\n                  value={employeeData.telefone}\r\n                  onChange={handleChange}\r\n                  required\r\n                />\r\n\r\n                <label className=\"product-label\">Data de Nascimento*:</label>\r\n                <input\r\n                  className=\"mb-3 produto-input\"\r\n                  type=\"date\"\r\n                  name=\"data_nascimento\"\r\n                  value={employeeData.data_nascimento}\r\n                  onChange={handleChange}\r\n                  required\r\n                />\r\n\r\n                <label className=\"product-label\">Senha*:</label>\r\n                <input\r\n                  className=\"mb-3 produto-input\"\r\n                  type=\"password\"\r\n                  placeholder=\"Mínimo 8 caracteres\"\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  required\r\n                />\r\n\r\n                <label className=\"product-label\">Confirmar Senha*:</label>\r\n                <input\r\n                  className=\"mb-3 produto-input\"\r\n                  type=\"password\"\r\n                  placeholder=\"Confirme a senha\"\r\n                  value={confirmPassword}\r\n                  onChange={(e) => setConfirmPassword(e.target.value)}\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"d-flex justify-content-between w-100 mt-3\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"down-btn btn col-12 col-md-3 primaria\"\r\n              onClick={clearForm}\r\n            >\r\n              Limpar\r\n            </button>\r\n\r\n            <button\r\n              type=\"button\"\r\n              className=\"down-btn btn col-12 col-md-3 primaria\"\r\n              onClick={pushBackToEmployees}\r\n            >\r\n              Cancelar\r\n            </button>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className=\"down-btn btn col-12 col-md-3 primaria\"\r\n              disabled={loading}\r\n            >\r\n              {loading ? \"Salvando...\" : \"Salvar Funcionário\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddEmployee;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}