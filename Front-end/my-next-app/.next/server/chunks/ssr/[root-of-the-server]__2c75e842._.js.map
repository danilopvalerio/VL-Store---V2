{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/danil/OneDrive/Documentos/2025/P6/web/PROJETOS/VL-Store---V2-develop/Front-end/my-next-app/src/pages/AddEmployeePage.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/router\";\nimport axios from \"axios\";\nimport \"../../public/css/products.css\";\nimport \"../../public/css/general.css\";\n\nconst AddEmployee = () => {\n  const router = useRouter();\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const [employeeData, setEmployeeData] = useState({\n    nome: \"\",\n    email: \"\",\n    cpf: \"\",\n    telefone: \"\",\n    data_nascimento: \"\",\n    role: \"funcionario\", // Valor padrão\n  });\n\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n\n  useEffect(() => {\n    const jwtToken = localStorage.getItem(\"jwtToken\");\n    const userData = localStorage.getItem(\"userData\");\n\n    if (!jwtToken || !userData) {\n      router.push(\"/initialPage\");\n      return;\n    }\n  }, []);\n\n  const pushBackToEmployees = () => {\n    router.push(\"/employeesPage\");\n  };\n\n  const handleChange = (\n    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>\n  ) => {\n    const { name, value } = e.target;\n    setEmployeeData((prev) => ({ ...prev, [name]: value }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(\"\");\n    setSuccess(false);\n\n    // Validações básicas\n    if (\n      !employeeData.nome ||\n      !employeeData.email ||\n      !employeeData.cpf ||\n      !employeeData.telefone ||\n      !employeeData.data_nascimento ||\n      !password\n    ) {\n      setError(\"Preencha todos os campos obrigatórios.\");\n      setLoading(false);\n      setTimeout(() => setError(\"\"), 3000);\n      return;\n    }\n\n    if (password !== confirmPassword) {\n      setError(\"As senhas não coincidem.\");\n      setLoading(false);\n      setTimeout(() => setError(\"\"), 3000);\n      return;\n    }\n\n    if (password.length < 8) {\n      setError(\"A senha deve ter pelo menos 8 caracteres.\");\n      setLoading(false);\n      setTimeout(() => setError(\"\"), 3000);\n      return;\n    }\n\n    const jwtToken = localStorage.getItem(\"jwtToken\");\n    const userData = localStorage.getItem(\"userData\");\n\n    if (!jwtToken || !userData) {\n      router.push(\"/initialPage\");\n      return;\n    }\n\n    try {\n      const parsedData = JSON.parse(userData);\n      const idLoja = parsedData.id_loja;\n\n      const payload = {\n        ...employeeData,\n        senha: password,\n        id_loja: idLoja,\n      };\n\n      const response = await axios.post(\n        \"http://localhost:9700/api/funcionarios\",\n        payload,\n        {\n          headers: {\n            Authorization: `Bearer ${jwtToken}`,\n            \"Content-Type\": \"application/json\",\n          },\n          timeout: 5000,\n        }\n      );\n\n      if (response.status === 201) {\n        setSuccess(true);\n        setTimeout(() => {\n          setSuccess(false);\n          pushBackToEmployees();\n        }, 3000);\n      }\n    } catch (error: any) {\n      const errorMessage =\n        error.response?.data?.message || \"Erro ao cadastrar funcionário\";\n      setError(errorMessage);\n      setTimeout(() => setError(\"\"), 3000);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const clearForm = () => {\n    setEmployeeData({\n      nome: \"\",\n      email: \"\",\n      cpf: \"\",\n      telefone: \"\",\n      data_nascimento: \"\",\n      role: \"FUNCIONARIO\",\n    });\n    setPassword(\"\");\n    setConfirmPassword(\"\");\n    setError(\"\");\n    setSuccess(false);\n  };\n\n  return (\n    <div className=\"d-flex justify-content-center align-items-center w-100\">\n      <div className=\"product-page d-flex justify-content-center align-items-center terciary p-4 flex-column rounded-5 white-light\">\n        <h3 className=\"col-12 text-center\">Adicionar Novo Funcionário</h3>\n\n        {success && (\n          <div className=\"alert alert-success col-12 text-center mt-2\">\n            Funcionário cadastrado com sucesso! Redirecionando...\n          </div>\n        )}\n\n        {error && (\n          <div className=\"alert alert-danger col-12 text-center mt-2\">\n            {error}\n          </div>\n        )}\n\n        <form\n          onSubmit={handleSubmit}\n          className=\"row w-100 justify-content-between\"\n        >\n          <div className=\"col-12 w-100\">\n            <div className=\"row product-info w-100 d-flex justify-content-between align-items-between\">\n              <div className=\"mx-auto col-12 p-4 info-base row\">\n                <h5 className=\"text-center mb-2\">Informações básicas</h5>\n\n                <label className=\"product-label\">Nome Completo*:</label>\n                <input\n                  className=\"mb-3 produto-input\"\n                  name=\"nome\"\n                  placeholder=\"Ex: João da Silva\"\n                  value={employeeData.nome}\n                  onChange={handleChange}\n                  required\n                />\n\n                <label className=\"product-label\">Email*:</label>\n                <input\n                  className=\"mb-3 produto-input\"\n                  type=\"email\"\n                  name=\"email\"\n                  placeholder=\"Ex: joao@email.com\"\n                  value={employeeData.email}\n                  onChange={handleChange}\n                  required\n                />\n\n                <label className=\"product-label\">CPF*:</label>\n                <input\n                  className=\"mb-3 produto-input\"\n                  name=\"cpf\"\n                  placeholder=\"Ex: 12345678900\"\n                  value={employeeData.cpf}\n                  onChange={handleChange}\n                  required\n                />\n\n                <label className=\"product-label\">Telefone*:</label>\n                <input\n                  className=\"mb-3 produto-input\"\n                  name=\"telefone\"\n                  placeholder=\"Ex: 11987654321\"\n                  value={employeeData.telefone}\n                  onChange={handleChange}\n                  required\n                />\n\n                <label className=\"product-label\">Data de Nascimento*:</label>\n                <input\n                  className=\"mb-3 produto-input\"\n                  type=\"date\"\n                  name=\"data_nascimento\"\n                  value={employeeData.data_nascimento}\n                  onChange={handleChange}\n                  required\n                />\n\n                <label className=\"product-label\">Senha*:</label>\n                <input\n                  className=\"mb-3 produto-input\"\n                  type=\"password\"\n                  placeholder=\"Mínimo 8 caracteres\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  required\n                />\n\n                <label className=\"product-label\">Confirmar Senha*:</label>\n                <input\n                  className=\"mb-3 produto-input\"\n                  type=\"password\"\n                  placeholder=\"Confirme a senha\"\n                  value={confirmPassword}\n                  onChange={(e) => setConfirmPassword(e.target.value)}\n                  required\n                />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"d-flex justify-content-between w-100 mt-3\">\n            <button\n              type=\"button\"\n              className=\"down-btn btn col-12 col-md-3 primaria\"\n              onClick={clearForm}\n            >\n              Limpar\n            </button>\n\n            <button\n              type=\"button\"\n              className=\"down-btn btn col-12 col-md-3 primaria\"\n              onClick={pushBackToEmployees}\n            >\n              Cancelar\n            </button>\n\n            <button\n              type=\"submit\"\n              className=\"down-btn btn col-12 col-md-3 primaria\"\n              disabled={loading}\n            >\n              {loading ? \"Salvando...\" : \"Salvar Funcionário\"}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default AddEmployee;\n"],"names":[],"mappings":"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","debugId":null}}]
}